{% load static %}

<!-- Upper Header -->
<div class="w-full bg-primary md:px-8 px-2 2xl:px-[20%] py-3 flex justify-between items-center z-30">
    <div class=" flex justify-start items-center">
        <a href="mailto:pandora@gmail.com" class="flex items-center justify-center gap-2 pl-3 cursor-pointer hover:text-gray-200">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75" />
            </svg>
            <p class="hidden lg:block text-sm">pandora@gmail.com</p>         
        </a>
        <a href="tel:09123456789" class="flex items-center justify-center gap-2 cursor-pointer hover:text-gray-200">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z" />
            </svg>   
            <p class="hidden lg:block text-sm">09123456789</p>  
        </a>
    </div>
    <p class="lg:-mr-48">ارزان ترین قیمت</p>
    <div class="flex justify-start items-center gap-3">
        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0,0,256,256" class="size-6 cursor-pointer">
            <g fill="black" fill-rule="nonzero" stroke="none" stroke-width="1.5" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(5.12,5.12)"><path d="M16,3c-7.16752,0 -13,5.83248 -13,13v18c0,7.16752 5.83248,13 13,13h18c7.16752,0 13,-5.83248 13,-13v-18c0,-7.16752 -5.83248,-13 -13,-13zM16,5h18c6.08648,0 11,4.91352 11,11v18c0,6.08648 -4.91352,11 -11,11h-18c-6.08648,0 -11,-4.91352 -11,-11v-18c0,-6.08648 4.91352,-11 11,-11zM37,11c-1.10457,0 -2,0.89543 -2,2c0,1.10457 0.89543,2 2,2c1.10457,0 2,-0.89543 2,-2c0,-1.10457 -0.89543,-2 -2,-2zM25,14c-6.06329,0 -11,4.93671 -11,11c0,6.06329 4.93671,11 11,11c6.06329,0 11,-4.93671 11,-11c0,-6.06329 -4.93671,-11 -11,-11zM25,16c4.98241,0 9,4.01759 9,9c0,4.98241 -4.01759,9 -9,9c-4.98241,0 -9,-4.01759 -9,-9c0,-4.98241 4.01759,-9 9,-9z"></path></g></g>
        </svg>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 cursor-pointer">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 0 1-.923 1.785A5.969 5.969 0 0 0 6 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337Z" />
        </svg>          
    </div>
</div>

<!-- Main header -->
<div id="header" class="flex justify-between items-center z-50 bg-white w-full md:px-8 px-2 border-b-gray-300 border-b py-4 2xl:px-[20%]">
    <svg id="hamburger" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-7 cursor-pointer block lg:hidden">
        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
    </svg>   
    <input  class="input input-bordered input-sm" 
            id="search"
            placeholder="جستجو ..."
            />

    <div class="items-center justify-center gap-3 lg:gap-5 hidden lg:flex">
        <a hx-get="{% url 'home' %}" hx-target="body" hx-push-url="true" class="font-medium cursor-pointer">خانه</a>
        <a hx-get="{% url 'products' %}" hx-target="body" hx-push-url="true" class="font-medium cursor-pointer">محصولات</a>
        <a hx-get="{% url 'about' %}" hx-target="body" hx-push-url="true" class="font-medium cursor-pointer">درباره ما</a>
    </div>
    <img src="{% static 'image/logo.png' %}" class="-mb-6"/>
</div>
<div id="search_con" class="z-50 hidden">

</div>

<!-- Side menu -->
<ul id="menu" class="menu bg-base-200 rounded-box w-56 hidden fixed">
    <li><a hx-get="{% url 'home' %}" hx-target="body" hx-push-url="true">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
        </svg>          
        <p class="font-medium text-lg">خانه</p>
    </a></li>
    <li><a hx-get="{% url 'products' %}" hx-target="body" hx-push-url="true">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />
        </svg>          
        <p class="font-medium text-lg">محصولات</p>
    </a></li>
    <li><a hx-get="{% url 'about' %}" hx-target="body" hx-push-url="true">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25" />
        </svg>          
        <p class="font-medium text-lg">درباره ما</p>
    </a></li>
</ul>

<script>
    var menu = document.getElementById('menu')
    document.getElementById('hamburger').addEventListener('click', (e) => {
        menu.classList.toggle('hidden')
    })
</script>

<script>   
    var search = document.getElementById('search');
    var searchCon = document.getElementById('search_con');

    function isBlank(str) {
        return (!str || /^\s*$/.test(str));
    }

    var getProducts = () => {
        search.addEventListener('input', (e) =>{
        // checks if search text is empty
        if(isBlank(search.value)){
            searchCon.innerHTML = ''
        } else {
            var productsUrl = `/search/${search.value}`
            htmx.ajax('GET', productsUrl, { target: '#search_con' }); 
        }
    })}

    search.addEventListener('focus', () => {
        getProducts()
        document.getElementsByTagName('body')[0].classList.add('overflow-hidden')
        searchCon.classList.remove('hidden')
    })

    search.addEventListener('focusout', () => {
        setTimeout(() => {
            document.getElementsByTagName('body')[0].classList.add('overflow-visible')
            searchCon.classList.add('hidden')
        }, 100)
    })
</script> 